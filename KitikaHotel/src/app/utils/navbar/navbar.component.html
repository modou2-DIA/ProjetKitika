<!-- Navbar Wrapper -->
<div class="min-h-screen flex flex-col md:flex-row bg-gray-100">

  <!-- Sidebar -->
  <div
    class="fixed inset-y-0 left-0 z-40 w-64 bg-blue-800 text-white transform transition-transform duration-300 ease-in-out md:translate-x-0"
    [class.-translate-x-full]="!sidebarOpen"
  >
    <!-- Logo -->
    <div class="p-4 flex items-center justify-between border-b border-blue-700">
      <div class="flex items-center space-x-2">
        <i class="fas fa-hotel text-2xl"></i>
        <span class="text-xl font-bold">Hotel Kitika</span>
      </div>
      <button class="md:hidden text-white" (click)="toggleSidebar()">
        <i class="fas fa-times"></i>
      </button>
    </div>

    <!-- Menu -->
    <div class="p-4 overflow-y-auto h-[calc(100vh-64px)]">

      <!-- Menu Principal -->
      <div class="mb-6">
        <div class="text-xs uppercase font-semibold text-blue-300 mb-2">Menu Principal</div>
        <ul>
          <li *ngIf="(isAuthenticated$ | async)">
            <a routerLink="/dashboard" routerLinkActive="bg-blue-700"
              class="flex items-center p-2 rounded hover:bg-blue-700">
              <i class="fas fa-tachometer-alt mr-3"></i> <span>Dashboard</span>
            </a>
          </li>
        </ul>
      </div>

      <!-- Réceptionniste -->
      <div class="mb-6" *ngIf="(userRole$ | async) === 'RECEPTIONNISTE'">
        <div class="text-xs uppercase font-semibold text-blue-300 mb-2">Réception</div>
        <ul>
          <li><a routerLink="/hebergement" class="flex items-center p-2 rounded hover:bg-blue-700"><i class="fas fa-bed mr-3"></i><span>Hébergement</span></a></li>
          <li><a routerLink="/guest-list" class="flex items-center p-2 rounded hover:bg-blue-700"><i class="fas fa-address-book mr-3"></i><span>Liste invités</span></a></li>
          <li><a routerLink="/facturation" class="flex items-center p-2 rounded hover:bg-blue-700"><i class="fas fa-file-invoice-dollar mr-3"></i><span>Facturation</span></a></li>
          <li><a routerLink="/gestion-reservation-groupee" class="flex items-center p-2 rounded hover:bg-blue-700"><i class="fas fa-users mr-3"></i><span>Réservations groupées</span></a></li>
          <li><a routerLink="/stock" class="flex items-center p-2 rounded hover:bg-blue-700"><i class="fas fa-boxes mr-3"></i><span>Stock</span></a></li>
          
        </ul>
      </div>

      <!-- Gouvernante -->
      <div class="mb-6" *ngIf="(userRole$ | async) === 'GOUVERNANTE'">
        <div class="text-xs uppercase font-semibold text-blue-300 mb-2">Gouvernante</div>
        <ul>
          <li><a routerLink="/gouvernante-checklist" class="flex items-center p-2 rounded hover:bg-blue-700"><i class="fas fa-broom mr-3"></i><span>Checklist ménage</span></a></li>
          <li><a routerLink="/gestion-chambres" class="flex items-center p-2 rounded hover:bg-blue-700"><i class="fas fa-door-closed mr-3"></i><span>Gestion Chambres</span></a></li>
       
          <li><a routerLink="/planning-personnel" class="flex items-center p-2 rounded hover:bg-blue-700"><i class="fas fa-calendar-check mr-3"></i><span>Planning personnel</span></a></li>
        
        </ul>
      </div>

      <!-- Restauration -->
      <div class="mb-6" *ngIf="(userRole$ | async) === 'GESTIONNAIRE_RESTAURANT'">
        <div class="text-xs uppercase font-semibold text-blue-300 mb-2">Restauration</div>
        <ul>
          <li><a routerLink="/restauration" class="flex items-center p-2 rounded hover:bg-blue-700"><i class="fas fa-concierge-bell mr-3"></i><span>Gestion Restauration</span></a></li>
          <li><a routerLink="/menu" class="flex items-center p-2 rounded hover:bg-blue-700"><i class="fas fa-utensils mr-3"></i><span>Menu</span></a></li>
          <li><a routerLink="/stock-cuisine" class="flex items-center p-2 rounded hover:bg-blue-700"><i class="fas fa-warehouse mr-3"></i><span>Stock cuisine</span></a></li>
          <li><a routerLink="/facturation-resto" class="flex items-center p-2 rounded hover:bg-blue-700"><i class="fas fa-receipt mr-3"></i><span>Facturation Resto</span></a></li>
        </ul>
      </div>

      <!-- Administration -->
      <div class="mb-6" *ngIf="(userRole$ | async) === 'ADMIN'">
        <div class="text-xs uppercase font-semibold text-blue-300 mb-2">Administration</div>
        <ul>
          <li><a routerLink="/client" class="flex items-center p-2 rounded hover:bg-blue-700"><i class="fas fa-users mr-3"></i><span>Clients</span></a></li>
          <li><a routerLink="/utilisateurs" class="flex items-center p-2 rounded hover:bg-blue-700"><i class="fas fa-user-shield mr-3"></i><span>Utilisateurs</span></a></li>
          <li><a routerLink="/audit-log" class="flex items-center p-2 rounded hover:bg-blue-700"><i class="fas fa-clipboard-list mr-3"></i><span>Historique</span></a></li>
        </ul>
      </div>

      <!-- Connexion / Profil -->
      <div class="border-t border-blue-700 pt-4">
        <ng-container *ngIf="(isAuthenticated$ | async); else loginBtn">
          <button class="flex items-center p-2 rounded hover:bg-red-700 w-full text-left" (click)="toggleLogoutConfirm()">
            <i class="fas fa-user-circle mr-3"></i>
            <span>{{ (userName$ | async) }} (Déconnexion)</span>
          </button>
        </ng-container>
        <ng-template #loginBtn>
          <a routerLink="/login" class="flex items-center p-2 rounded hover:bg-green-700">
            <i class="fas fa-sign-in-alt mr-3"></i><span>Se connecter</span>
          </a>
        </ng-template>
      </div>
    </div>
  </div>

  <!-- Toggle Button (mobile only) -->
  <button class="fixed top-4 left-4 z-50 md:hidden bg-blue-800 text-white p-2 rounded-full shadow-lg" (click)="toggleSidebar()">
    <i class="fas fa-bars"></i>
  </button>

  <!-- Main Content -->
  <div class="flex-1 p-6 md:ml-64">
    <router-outlet></router-outlet>
  </div>

  <!-- Modal Déconnexion -->
  <div *ngIf="showLogoutConfirm" class="fixed inset-0 flex items-center justify-center bg-gray-900 bg-opacity-50 z-50">
    <div class="bg-white text-black rounded-lg shadow-lg w-80 p-6">
      <p class="text-lg font-semibold mb-4">Se déconnecter ?</p>
      <div class="flex justify-end gap-3">
        <button class="bg-gray-200 text-gray-800 px-4 py-2 rounded-md hover:bg-gray-300" (click)="cancelLogout()">Non</button>
        <button class="bg-red-600 text-white px-4 py-2 rounded-md hover:bg-red-700" (click)="confirmLogout()">Oui</button>
      </div>
    </div>
  </div>
</div>
