
<div class="max-w-4xl mx-auto px-4 py-6 bg-white rounded-lg shadow-md h-[80vh] overflow-y-auto">
  <h2 class="text-2xl font-bold text-blue-800 mb-6">Nouvelle Réservation</h2>

  <form [formGroup]="reservationForm" (ngSubmit)="submitReservation()" class="space-y-6">
      
    <!-- Sélection chambre -->
    <div>
      <label class="block text-sm font-medium text-gray-700 mb-1">Chambre</label>
      <select formControlName="chambreId" class="w-full border rounded-lg px-4 py-2 focus:outline-none focus:ring focus:ring-blue-300">
        <option value="" disabled>-- Sélectionner --</option>
        <option *ngFor="let chambre of chambresDispo" [value]="chambre.id">
          Chambre {{ chambre.numero }} — {{ chambre.type }}
        </option>
      </select>
    </div>

    <!-- Bloc client -->
    <div class="border rounded-lg p-5 bg-gray-50">
      <div class="flex flex-col md:flex-row md:items-center md:justify-between mb-4 gap-2">
        <h3 class="text-base font-semibold text-gray-700">Client</h3>
        <button type="button" class="text-sm text-blue-600 hover:underline" *ngIf="isExistingClient()" (click)="clearMatchedClient()">
          Changer (client nouveau)
        </button>
      </div>

      <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
        <!-- Sélecteur client existant -->
        <div class="md:col-span-2">
          <label class="block text-sm text-gray-600 mb-1">Client existant</label>
          <select class="w-full border rounded-lg px-4 py-2 focus:outline-none focus:ring focus:ring-blue-300"
                  [ngModel]="matchedClient()?.id || ''"
                  (ngModelChange)="chooseExisting($event)">
            <option value="">— Aucun (client nouveau) —</option>
            <option *ngFor="let c of clients" [ngValue]="c.id">
              {{ c.nom }} {{ c.prenom }} — {{ c.telephone }} — {{ c.email }}
            </option>
          </select>
        </div>

        <!-- Matching -->
        <input formControlName="telephone" class="border rounded-lg px-4 py-2 focus:outline-none focus:ring focus:ring-blue-300" placeholder="Téléphone" />
        <input formControlName="email" class="border rounded-lg px-4 py-2 focus:outline-none focus:ring focus:ring-blue-300" placeholder="Email" />

        <!-- Infos client -->
        <input formControlName="nom" class="border rounded-lg px-4 py-2 focus:outline-none focus:ring focus:ring-blue-300" placeholder="Nom" [disabled]="isExistingClient()" />
        <input formControlName="prenom" class="border rounded-lg px-4 py-2 focus:outline-none focus:ring focus:ring-blue-300" placeholder="Prénom" [disabled]="isExistingClient()" />
        <input formControlName="nationalite" class="border rounded-lg px-4 py-2 focus:outline-none focus:ring focus:ring-blue-300" placeholder="Nationalité" [disabled]="isExistingClient()" />
        <input formControlName="numeroPieceIdentite" class="border rounded-lg px-4 py-2 focus:outline-none focus:ring focus:ring-blue-300" placeholder="Numéro PI" [disabled]="isExistingClient()" />
      </div>

      <!-- Badge client détecté -->
      <div *ngIf="isExistingClient()" class="mt-4 text-sm px-4 py-3 rounded-lg bg-green-50 border border-green-200 text-green-700">
        Client existant détecté : <strong>{{ matchedClient()?.nom }} {{ matchedClient()?.prenom }}</strong>
        ({{ matchedClient()?.telephone }} · {{ matchedClient()?.email }})
      </div>
    </div>

    <!-- Dates -->
    <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
      <div>
        <label class="block text-sm font-medium text-gray-700 mb-1">Date début</label>
        <input type="date" formControlName="dateDebut" class="w-full border rounded-lg px-4 py-2 focus:outline-none focus:ring focus:ring-blue-300" />
      </div>
      <div>
        <label class="block text-sm font-medium text-gray-700 mb-1">Date fin</label>
        <input type="date" formControlName="dateFin" class="w-full border rounded-lg px-4 py-2 focus:outline-none focus:ring focus:ring-blue-300" />
      </div>
    </div>

    <!-- Actions -->
    <div class="flex flex-col md:flex-row justify-end gap-3 pt-4">
      <button type="button" class="px-4 py-2 bg-gray-200 text-gray-700 rounded-lg hover:bg-gray-300 transition" (click)="cancel()">Annuler</button>
      <button type="submit" class="px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition disabled:opacity-50" [disabled]="reservationForm.invalid">
        Réserver
      </button>
    </div>
    <!-- ... ton contenu reste inchangé ... -->
  </form>
</div>
