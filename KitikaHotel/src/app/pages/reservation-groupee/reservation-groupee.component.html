<div class="p-6 bg-white rounded shadow max-w-6xl mx-auto">
  <h2 class="text-2xl font-bold mb-6 text-blue-700">Nouvelle Réservation Groupée</h2>

  <form [formGroup]="form" (ngSubmit)="soumettre()">
    <!-- Sélection société -->
    <div class="mb-6">
      <label class="block mb-2 font-medium">Sélectionner une société existante</label>
      <select class="border p-2 rounded w-full" (change)="onSocieteSelect($event)">
        <option value="">-- Nouvelle société --</option>
        <option *ngFor="let s of societesExistantes" [value]="s.id">
          {{ s.nom }} ({{ s.email }})
        </option>
      </select>
    </div>

    <!-- Informations du groupe -->
    <div class="grid grid-cols-1 md:grid-cols-2 gap-4 mb-6">
      <div>
        <label class="block mb-1 font-medium">Nom du Groupe</label>
        <input type="text" formControlName="nomGroupe" class="w-full border p-2 rounded" />
      </div>
      <div>
        <label class="block mb-1 font-medium">Date Début</label>
        <input type="date" formControlName="dateDebut" class="w-full border p-2 rounded" />
      </div>
      <div>
        <label class="block mb-1 font-medium">Date Fin</label>
        <input type="date" formControlName="dateFin" class="w-full border p-2 rounded" />
      </div>
    </div>

    <!-- Informations de la société -->
    <div formGroupName="societe" class="grid grid-cols-1 md:grid-cols-2 gap-4 mb-6">
      <input type="text" formControlName="nom" class="border p-2 rounded" placeholder="Nom société" />
      <input type="text" formControlName="telephone" class="border p-2 rounded" placeholder="Téléphone" />
      <input type="email" formControlName="email" class="border p-2 rounded" placeholder="Email" />
      <input type="text" formControlName="adresse" class="border p-2 rounded" placeholder="Adresse" />
      <input type="text" formControlName="nationalite" class="border p-2 rounded" placeholder="Nationalité" />
      <input type="text" formControlName="numeroPieceIdentite" class="border p-2 rounded" placeholder="N° pièce d'identité" />
    </div>

    <!-- Réservations -->
    <div formArrayName="reservations">
      <h3 class="text-lg font-semibold text-gray-700 mb-4">Détails des Réservations</h3>

      <div *ngFor="let reservation of reservations.controls; let i = index" [formGroupName]="i" class="border p-4 rounded mb-6 bg-gray-50">
        <div formGroupName="client" class="grid grid-cols-1 md:grid-cols-2 gap-4 mb-4">
          <input type="text" formControlName="nom" class="border p-2 rounded" placeholder="Nom client" />
          <input type="text" formControlName="prenom" class="border p-2 rounded" placeholder="Prénom client" />
          <input type="text" formControlName="telephone" class="border p-2 rounded" placeholder="Téléphone client" />
          <input type="email" formControlName="email" class="border p-2 rounded" placeholder="Email client" />
          <input type="text" formControlName="nationalite" class="border p-2 rounded" placeholder="Nationalité client" />
          <input type="text" formControlName="numeroPieceIdentite" class="border p-2 rounded" placeholder="N° pièce d'identité" />
        </div>

        <div class="grid grid-cols-1 md:grid-cols-2 gap-4 mb-4">
          <select formControlName="chambreId" class="border p-2 rounded">
            <option value="">-- Sélectionner une chambre --</option>
            <option *ngFor="let chambre of chambresDisponibles" [value]="chambre.id">
              {{ chambre.nom }} - {{ chambre.type }}
            </option>
          </select>

          <input type="date" formControlName="dateDebut" class="border p-2 rounded" />
          <input type="date" formControlName="dateFin" class="border p-2 rounded" />
        </div>

        <div class="text-right">
          <button type="button" class="text-red-600 hover:underline" (click)="supprimerReservation(i)" *ngIf="reservations.length > 1">
            Supprimer cette réservation
          </button>
        </div>
      </div>

      <div class="mb-6">
        <button type="button" class="bg-blue-600 text-white px-4 py-2 rounded" (click)="ajouterReservation()">
          + Ajouter une réservation
        </button>
      </div>
    </div>

    <!-- Bouton de soumission -->
    <div class="text-center">
      <button type="submit" class="bg-green-600 text-white px-6 py-2 rounded font-semibold"
              [disabled]="form.invalid">
        Enregistrer la réservation groupée
      </button>
    </div>
  </form>
</div>
