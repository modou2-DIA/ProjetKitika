<div class="p-6">
  <!-- Titre et filtres -->
  <h2 class="text-2xl font-bold mb-6 text-blue-800">Module de Facturation</h2>

  <!-- Barre de recherche et filtres -->
  <div class="flex flex-wrap gap-4 mb-6">
    <input 
      [(ngModel)]="searchClient" 
      (ngModelChange)="onFiltreChange()"
      type="text" 
      placeholder="Rechercher un client..."
      class="border border-gray-300 px-3 py-2 rounded shadow-sm w-full md:w-1/3">

    <select 
      [(ngModel)]="filtrePaiement" 
      (ngModelChange)="onFiltreChange()"
      class="border border-gray-300 px-3 py-2 rounded shadow-sm w-full md:w-1/4">
      <option value="">Tous les paiements</option>
      <option value="true">PayÃ©es</option>
      <option value="false">ImpayÃ©es</option>
    </select>
  </div>

  <!-- Tableau des factures -->
  <div class="bg-white shadow rounded overflow-x-auto">
    <table class="min-w-full">
      <thead class="bg-gray-100">
        <tr>
          <th class="text-left px-4 py-2">Facture NÂ°</th>
          <th class="text-left px-4 py-2">Client</th>
          <th class="text-left px-4 py-2">Date</th>
          <th class="text-left px-4 py-2">Montant Total</th>
          <th class="text-left px-4 py-2">Statut</th>
          <th class="text-left px-4 py-2">Actions</th>
        </tr>
      </thead>
      <tbody>
        <tr *ngFor="let facture of facturesFiltrees" class="border-b hover:bg-gray-50">
          <td class="px-4 py-2">{{ facture.id }}</td>
          <td class="px-4 py-2">{{ facture.client.nom }} {{ facture.client.prenom }}</td>
          <td class="px-4 py-2">{{ facture.dateEmission }}</td>
          <td class="px-4 py-2">{{ facture.montantTotal }} $</td>
          <td class="px-4 py-2">
            <span [ngClass]="{
              'text-green-600': facture.payee,
              'text-red-600': !facture.payee
            }">
              {{ facture.payee ? 'PayÃ©e' : 'ImpayÃ©e' }}
            </span>
          </td>
          <td class="px-4 py-2 flex gap-2">
            <button class="text-blue-600 hover:underline" (click)="genererPDF(facture)">ğŸ“„ PDF</button>
            <button *ngIf="!facture.payee" class="text-green-600 hover:underline" (click)="payerFacture(facture)">RÃ©gler</button>
          </td>
        </tr>
      </tbody>
    </table>
  </div>
</div>
