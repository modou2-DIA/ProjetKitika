<h2 class="text-xl font-bold mb-4">Ajouter un service annexe</h2>

<div *ngIf="error" class="bg-red-100 text-red-700 p-2 rounded mb-3">{{ error }}</div>

<div class="mb-3">
  <label class="block text-sm font-medium">Description (optionnel)</label>
  <input [(ngModel)]="description" name="description"
         class="border rounded px-3 py-2 w-full" placeholder="Ex : Services divers du jour">
</div>

<div class="space-y-3">
  <div *ngFor="let it of items; let i = index" class="border rounded p-3">
    <div class="mb-2">
      <label class="block text-xs text-gray-600">Article</label>
      <input list="presets" [(ngModel)]="it.nom" name="nom{{i}}"
             class="border rounded px-3 py-2 w-full"
             placeholder="Ex : Piscine - Accès journalier">
      <datalist id="presets">
        <option *ngFor="let p of presets" [value]="p"></option>
      </datalist>
    </div>
    <div class="grid grid-cols-2 gap-3">
      <div>
        <label class="block text-xs text-gray-600">Quantité</label>
        <input type="number" [(ngModel)]="it.quantite" name="qte{{i}}"
               min="1" class="border rounded px-3 py-2 w-full">
      </div>
      <div>
        <label class="block text-xs text-gray-600">Prix unitaire (€)</label>
        <input type="number" [(ngModel)]="it.prixUnitaire" name="pu{{i}}"
               min="0.01" step="0.01" class="border rounded px-3 py-2 w-full">
      </div>
    </div>
    <div class="flex justify-end mt-2">
      <button (click)="removeItem(i)" class="text-sm text-red-600 hover:underline">Supprimer</button>
    </div>
  </div>
</div>

<div class="flex justify-between mt-4">
  <button (click)="addItem()" class="bg-gray-200 hover:bg-gray-300 text-gray-800 px-3 py-2 rounded">
    + Ajouter un article
  </button>
  <div class="flex gap-2">
    <button (click)="close()" class="bg-gray-400 text-white px-4 py-2 rounded">Annuler</button>
    <button (click)="save()" class="bg-green-600 text-white px-4 py-2 rounded">Enregistrer</button>
  </div>
</div>
