import{N as Z,S as $,T as ee}from"./chunk-FLFTTJKL.js";import{g as R}from"./chunk-NBFJOCMR.js";import"./chunk-3NOMAPXL.js";import{$c as q,Bb as F,Cb as G,Db as k,Ec as I,Hb as i,Ib as x,Jb as y,La as a,Nb as w,Ob as E,Pb as T,Qa as b,Qc as P,Rc as j,Sc as h,Uc as O,Vc as L,Xa as N,Zb as A,Zc as B,_c as W,a as v,ab as S,ad as Q,dd as H,ed as z,fd as J,gd as K,ha as m,hb as _,ia as s,ja as M,jd as U,ka as V,kd as X,ld as Y,pb as e,qb as t,rb as f,ub as C,wb as c,wc as D,xb as g}from"./chunk-OKTVRY6G.js";var ie=["modalChambre"];function re(u,n){if(u&1){let r=C();e(0,"tr",20)(1,"td",21),i(2),t(),e(3,"td",21),i(4),t(),e(5,"td",21),i(6),t(),e(7,"td",21),i(8),t(),e(9,"td",21),i(10),t(),e(11,"td",21)(12,"button",22),c("click",function(){let l=m(r).$implicit,d=g();return s(d.openModalEdition(l))}),i(13,"Modifier"),t()()()}if(u&2){let r=n.$implicit;a(2),x(r.numero),a(2),x(r.type),a(2),y("",r.prixParNuit," TND"),a(2),x(r.statut),a(2),x(r.horsService?"Oui":"Non")}}function ne(u,n){if(u&1){let r=C();e(0,"h3",23),i(1),t(),e(2,"form",24),c("ngSubmit",function(){m(r);let l=g();return s(l.soumettreChambre())}),e(3,"div")(4,"label",25),i(5," Num\xE9ro de la chambre "),t(),f(6,"input",26),t(),e(7,"div")(8,"label",27),i(9," Type de chambre "),t(),e(10,"select",28)(11,"option",10),i(12,"-- S\xE9lectionner un type --"),t(),e(13,"option",11),i(14,"Simple"),t(),e(15,"option",12),i(16,"Double"),t(),e(17,"option",13),i(18,"Suite"),t()()(),e(19,"div")(20,"label",29),i(21," Prix par nuit (DT) "),t(),f(22,"input",30),t(),e(23,"div",31),f(24,"input",32),e(25,"label",33),i(26," Chambre hors service (indisponible \xE0 la r\xE9servation) "),t()(),e(27,"div",34)(28,"button",35),c("click",function(){m(r);let l=g();return s(l.annuler())}),i(29," Annuler "),t(),e(30,"button",36),i(31," Enregistrer "),t()()()}if(u&2){let r=g();a(),y(" ",r.isEditing?"Modifier une Chambre":"Ajouter une Chambre"," "),a(),_("formGroup",r.chambreForm)}}var te=class u{constructor(n,r,o,l){this.chambreService=n;this.fb=r;this.dialog=o;this.router=l}chambres=[];chambresFiltrees=[];searchTerm="";filtreType="";isEditing=!1;chambreForm;chambreEnCours;modalChambreRef;ngOnInit(){this.initForm(),this.chargerChambres()}initForm(){this.chambreForm=this.fb.group({numero:["",h.required],type:["",h.required],prixParNuit:[0,[h.required,h.min(0)]],statut:["Libre",h.required],horsService:[!1]})}chargerChambres(){this.chambreService.getAll().subscribe(n=>{this.chambres=n,this.filtrerChambres()})}filtrerChambres(){let n=this.searchTerm.toLowerCase();this.chambresFiltrees=this.chambres.filter(r=>{let o=r.numero.toLowerCase().includes(n)||r.type.toLowerCase().includes(n),l=!this.filtreType||r.type===this.filtreType;return o&&l})}openModalAjout(){this.isEditing=!1,this.chambreEnCours=void 0,this.chambreForm.reset({statut:"Libre",horsService:!1}),this.dialog.open(this.modalChambreRef,{width:"500px"})}openModalEdition(n){this.isEditing=!0,this.chambreEnCours=n,this.chambreForm.patchValue({numero:n.numero,type:n.type,prixParNuit:n.prixParNuit,statut:n.statut,horsService:n.horsService}),this.dialog.open(this.modalChambreRef,{width:"500px"})}soumettreChambre(){if(this.chambreForm.invalid)return;let n=v(v({},this.chambreEnCours),this.chambreForm.value);this.isEditing?this.chambreService.update(n).subscribe(()=>{this.dialog.closeAll(),this.chargerChambres()}):this.chambreService.create(n).subscribe(()=>{this.dialog.closeAll(),this.chargerChambres()})}annuler(){this.dialog.closeAll()}fermerModal(){this.annuler()}retour(){this.router.navigate(["../hebergement"])}static \u0275fac=function(r){return new(r||u)(b(ee),b(U),b(Z),b(R))};static \u0275cmp=N({type:u,selectors:[["app-gestion-chambres"]],viewQuery:function(r,o){if(r&1&&F(ie,5),r&2){let l;G(l=k())&&(o.modalChambreRef=l.first)}},decls:41,vars:3,consts:[["modalChambre",""],[1,"container","mx-auto","px-4","py-6"],[1,"mb-2"],[1,"flex","items-center","text-blue-700","hover:text-blue-900","cursor-pointer","w-fit",3,"click"],["xmlns","http://www.w3.org/2000/svg","fill","none","viewBox","0 0 24 24","stroke","currentColor",1,"h-5","w-5","mr-2"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M15 19l-7-7 7-7"],[1,"text-2xl","font-bold","text-blue-800","mb-6"],[1,"flex","flex-wrap","gap-4","items-center","mb-6"],["type","text","placeholder","Rechercher par num\xE9ro ou type",1,"border","px-3","py-2","rounded","w-full","md:w-1/3",3,"ngModelChange","input","ngModel"],[1,"border","px-3","py-2","rounded","w-full","md:w-1/4",3,"ngModelChange","change","ngModel"],["value",""],["value","Simple"],["value","Double"],["value","Suite"],[1,"bg-blue-600","text-white","px-4","py-2","rounded","hover:bg-blue-700",3,"click"],[1,"overflow-x-auto"],[1,"min-w-full","bg-white","shadow","rounded-lg"],[1,"bg-gray-100"],[1,"py-2","px-4","text-left"],["class","border-b hover:bg-gray-50",4,"ngFor","ngForOf"],[1,"border-b","hover:bg-gray-50"],[1,"py-2","px-4"],[1,"text-indigo-600","hover:underline",3,"click"],[1,"text-lg","font-semibold","text-gray-700","mb-4"],[1,"space-y-4",3,"ngSubmit","formGroup"],["for","numero",1,"block","text-sm","font-medium","text-gray-700","mb-1"],["id","numero","formControlName","numero","type","text","placeholder","Ex : 101",1,"w-full","border","px-3","py-2","rounded","focus:outline-none","focus:ring","focus:ring-blue-200"],["for","type",1,"block","text-sm","font-medium","text-gray-700","mb-1"],["id","type","formControlName","type",1,"w-full","border","px-3","py-2","rounded","focus:outline-none","focus:ring","focus:ring-blue-200"],["for","prixParNuit",1,"block","text-sm","font-medium","text-gray-700","mb-1"],["id","prixParNuit","type","number","formControlName","prixParNuit","placeholder","Ex : 150",1,"w-full","border","px-3","py-2","rounded","focus:outline-none","focus:ring","focus:ring-blue-200"],[1,"flex","items-center"],["id","horsService","type","checkbox","formControlName","horsService",1,"mr-2"],["for","horsService",1,"text-sm","text-gray-700"],[1,"text-right","space-x-2","pt-4","border-t"],["type","button",1,"px-4","py-2","bg-gray-300","text-gray-700","rounded","hover:bg-gray-400",3,"click"],["type","submit",1,"px-4","py-2","bg-blue-600","text-white","rounded","hover:bg-blue-700"]],template:function(r,o){if(r&1){let l=C();e(0,"div",1)(1,"div",2)(2,"a",3),c("click",function(){return m(l),s(o.retour())}),M(),e(3,"svg",4),f(4,"path",5),t(),i(5," Retour "),t()(),V(),e(6,"h2",6),i(7,"Gestion des Chambres"),t(),e(8,"div",7)(9,"input",8),T("ngModelChange",function(p){return m(l),E(o.searchTerm,p)||(o.searchTerm=p),s(p)}),c("input",function(){return m(l),s(o.filtrerChambres())}),t(),e(10,"select",9),T("ngModelChange",function(p){return m(l),E(o.filtreType,p)||(o.filtreType=p),s(p)}),c("change",function(){return m(l),s(o.filtrerChambres())}),e(11,"option",10),i(12,"Tous les types"),t(),e(13,"option",11),i(14,"Simple"),t(),e(15,"option",12),i(16,"Double"),t(),e(17,"option",13),i(18,"Suite"),t()(),e(19,"button",14),c("click",function(){return m(l),s(o.openModalAjout())}),i(20," + Ajouter une Chambre "),t()()(),e(21,"div",15)(22,"table",16)(23,"thead",17)(24,"tr")(25,"th",18),i(26,"Num\xE9ro"),t(),e(27,"th",18),i(28,"Type"),t(),e(29,"th",18),i(30,"Prix/Nuit"),t(),e(31,"th",18),i(32,"Statut"),t(),e(33,"th",18),i(34,"Hors Service"),t(),e(35,"th",18),i(36,"Actions"),t()()(),e(37,"tbody"),S(38,re,14,5,"tr",19),t()()(),S(39,ne,32,2,"ng-template",null,0,A)}r&2&&(a(9),w("ngModel",o.searchTerm),a(),w("ngModel",o.filtreType),a(28),_("ngForOf",o.chambresFiltrees))},dependencies:[I,D,X,W,J,K,j,q,P,z,O,L,B,Y,Q,H,$],encapsulation:2})};export{te as GestionChambresComponent};
