import{N as Y,S as Z,T as $}from"./chunk-YPNFJNAO.js";import{h as X}from"./chunk-GQZUTUBO.js";import"./chunk-3NOMAPXL.js";import"./chunk-OUXBLQ6M.js";import{$b as w,$c as R,Bb as e,Cb as t,Db as g,Gb as x,Ib as c,Jb as f,Kc as D,Lc as A,Ob as V,Pb as F,Qb as N,Ub as i,Uc as I,Vb as v,Wb as y,Xa as l,_b as E,a as S,ab as b,ac as M,ad as k,bd as h,dd as P,ed as j,hb as T,ia as m,id as O,ja as s,jd as L,kd as W,ld as q,mb as _,mc as G,od as B,pd as Q,qd as H,rd as z,tb as C,ud as J,vd as K,wd as U}from"./chunk-GEV565YZ.js";var te=["modalChambre"];function ie(u,n){if(u&1){let r=x();e(0,"tr",18)(1,"td",19),i(2),t(),e(3,"td",19),i(4),t(),e(5,"td",19),i(6),t(),e(7,"td",19),i(8),t(),e(9,"td",19)(10,"span",20),i(11),t()(),e(12,"td",19)(13,"button",21),c("click",function(){let a=m(r).$implicit,p=f();return s(p.openModalEdition(a))}),i(14," Modifier "),t()()()}if(u&2){let r=n.$implicit;l(2),v(r.numero),l(2),v(r.type),l(2),y("",r.prixParNuit," $"),l(2),v(r.statut),l(2),C("ngClass",r.horsService?"text-red-600":"text-green-600"),l(),y(" ",r.horsService?"Oui":"Non"," ")}}function re(u,n){if(u&1){let r=x();e(0,"div",22)(1,"h3",23),i(2),t(),e(3,"form",24),c("ngSubmit",function(){m(r);let a=f();return s(a.soumettreChambre())}),e(4,"div")(5,"label",25),i(6,"Num\xE9ro"),t(),g(7,"input",26),t(),e(8,"div")(9,"label",25),i(10,"Type"),t(),e(11,"select",27)(12,"option",6),i(13,"-- S\xE9lectionner un type --"),t(),e(14,"option",28),i(15,"Simple"),t(),e(16,"option",29),i(17,"Double"),t(),e(18,"option",9),i(19,"Suite"),t()()(),e(20,"div")(21,"label",25),i(22,"Prix par nuit (DT)"),t(),g(23,"input",30),t(),e(24,"div",31),g(25,"input",32),e(26,"label",33),i(27,"Chambre hors service"),t()(),e(28,"div",34)(29,"button",35),c("click",function(){m(r);let a=f();return s(a.annuler())}),i(30," Annuler "),t(),e(31,"button",36),i(32," Enregistrer "),t()()()()}if(u&2){let r=f();l(2),y(" ",r.isEditing?"Modifier une Chambre":"Ajouter une Chambre"," "),l(),C("formGroup",r.chambreForm)}}var ee=class u{constructor(n,r,o,a){this.chambreService=n;this.fb=r;this.dialog=o;this.router=a}chambres=[];chambresFiltrees=[];searchTerm="";filtreType="";isEditing=!1;chambreForm;chambreEnCours;modalChambreRef;ngOnInit(){this.initForm(),this.chargerChambres()}initForm(){this.chambreForm=this.fb.group({numero:["",h.required],type:["",h.required],prixParNuit:[0,[h.required,h.min(0)]],statut:["Libre",h.required],horsService:[!1]})}chargerChambres(){this.chambreService.getAll().subscribe(n=>{this.chambres=n,this.filtrerChambres()})}filtrerChambres(){let n=this.searchTerm.toLowerCase();this.chambresFiltrees=this.chambres.filter(r=>{let o=r.numero.toLowerCase().includes(n)||r.type.toLowerCase().includes(n),a=!this.filtreType||r.type===this.filtreType;return o&&a})}openModalAjout(){this.isEditing=!1,this.chambreEnCours=void 0,this.chambreForm.reset({statut:"Libre",horsService:!1}),this.dialog.open(this.modalChambreRef,{width:"500px"})}openModalEdition(n){this.isEditing=!0,this.chambreEnCours=n,this.chambreForm.patchValue({numero:n.numero,type:n.type,prixParNuit:n.prixParNuit,statut:n.statut,horsService:n.horsService}),this.dialog.open(this.modalChambreRef,{width:"500px"})}soumettreChambre(){if(this.chambreForm.invalid)return;let n=S(S({},this.chambreEnCours),this.chambreForm.value);this.isEditing?this.chambreService.update(n).subscribe(()=>{this.dialog.closeAll(),this.chargerChambres()}):this.chambreService.create(n).subscribe(()=>{this.dialog.closeAll(),this.chargerChambres()})}annuler(){this.dialog.closeAll()}fermerModal(){this.annuler()}retour(){this.router.navigate(["../hebergement"])}static \u0275fac=function(r){return new(r||u)(b($),b(J),b(Y),b(X))};static \u0275cmp=T({type:u,selectors:[["app-gestion-chambres"]],viewQuery:function(r,o){if(r&1&&V(te,5),r&2){let a;F(a=N())&&(o.modalChambreRef=a.first)}},decls:37,vars:3,consts:[["modalChambre",""],[1,"min-h-screen","bg-gray-50","px-4","py-6"],[1,"text-3xl","font-bold","text-blue-800","mb-8"],[1,"flex","flex-wrap","gap-4","items-center","mb-8"],["type","text","placeholder","\u{1F50D} Rechercher par num\xE9ro ou type",1,"border","px-4","py-2","rounded-lg","w-full","md:w-1/3","shadow-sm","focus:outline-none","focus:ring","focus:ring-blue-300",3,"ngModelChange","input","ngModel"],[1,"border","px-4","py-2","rounded-lg","w-full","md:w-1/4","shadow-sm","focus:outline-none","focus:ring","focus:ring-blue-300",3,"ngModelChange","change","ngModel"],["value",""],["value","Excecutive"],["value","Standard"],["value","Suite"],[1,"bg-blue-600","text-white","px-6","py-2","rounded-lg","hover:bg-blue-700","transition","shadow",3,"click"],[1,"fas","fa-plus","mr-2"],[1,"overflow-x-auto","bg-white","rounded-lg","shadow"],[1,"min-w-full","divide-y","divide-gray-200"],[1,"bg-blue-50","text-blue-800"],[1,"px-6","py-3","text-left","text-sm","font-semibold"],[1,"divide-y","divide-gray-100"],["class","hover:bg-gray-50 transition",4,"ngFor","ngForOf"],[1,"hover:bg-gray-50","transition"],[1,"px-6","py-4"],[3,"ngClass"],[1,"text-indigo-600","hover:underline","font-medium",3,"click"],[1,"p-6"],[1,"text-xl","font-semibold","text-gray-800","mb-4"],[1,"space-y-5",3,"ngSubmit","formGroup"],[1,"block","text-sm","font-medium","text-gray-700","mb-1"],["formControlName","numero","type","text","placeholder","Ex : 101",1,"w-full","border","px-4","py-2","rounded-lg","focus:outline-none","focus:ring","focus:ring-blue-300"],["formControlName","type",1,"w-full","border","px-4","py-2","rounded-lg","focus:outline-none","focus:ring","focus:ring-blue-300"],["value","Simple"],["value","Double"],["type","number","formControlName","prixParNuit","placeholder","Ex : 150",1,"w-full","border","px-4","py-2","rounded-lg","focus:outline-none","focus:ring","focus:ring-blue-300"],[1,"flex","items-center"],["type","checkbox","formControlName","horsService",1,"mr-2"],[1,"text-sm","text-gray-700"],[1,"pt-4","border-t","flex","justify-end","gap-3"],["type","button",1,"px-4","py-2","bg-gray-200","text-gray-700","rounded","hover:bg-gray-300",3,"click"],["type","submit",1,"px-4","py-2","bg-blue-600","text-white","rounded","hover:bg-blue-700"]],template:function(r,o){if(r&1){let a=x();e(0,"div",1)(1,"h2",2),i(2,"Gestion des Chambres"),t(),e(3,"div",3)(4,"input",4),M("ngModelChange",function(d){return m(a),w(o.searchTerm,d)||(o.searchTerm=d),s(d)}),c("input",function(){return m(a),s(o.filtrerChambres())}),t(),e(5,"select",5),M("ngModelChange",function(d){return m(a),w(o.filtreType,d)||(o.filtreType=d),s(d)}),c("change",function(){return m(a),s(o.filtrerChambres())}),e(6,"option",6),i(7,"Tous les types"),t(),e(8,"option",7),i(9,"Excecutive"),t(),e(10,"option",8),i(11,"Standard"),t(),e(12,"option",9),i(13,"Suite"),t()(),e(14,"button",10),c("click",function(){return m(a),s(o.openModalAjout())}),g(15,"i",11),i(16," Ajouter une Chambre "),t()(),e(17,"div",12)(18,"table",13)(19,"thead",14)(20,"tr")(21,"th",15),i(22,"Num\xE9ro"),t(),e(23,"th",15),i(24,"Type"),t(),e(25,"th",15),i(26,"Prix/Nuit"),t(),e(27,"th",15),i(28,"Statut"),t(),e(29,"th",15),i(30,"Hors Service"),t(),e(31,"th",15),i(32,"Actions"),t()()(),e(33,"tbody",16),_(34,ie,15,6,"tr",17),t()()(),_(35,re,33,2,"ng-template",null,0,G),t()}r&2&&(l(4),E("ngModel",o.searchTerm),l(),E("ngModel",o.filtreType),l(29),C("ngForOf",o.chambresFiltrees))},dependencies:[I,D,A,K,L,H,z,k,W,R,Q,P,j,O,U,q,B,Z],encapsulation:2})};export{ee as GestionChambresComponent};
